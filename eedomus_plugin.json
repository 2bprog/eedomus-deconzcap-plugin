{
	"plugin_id": "bbdeconzcap",
	"name_fr": "Capteurs - deConz",
	"icon": "deconzcap.png",
	"version": "0.0.1",
	"creation_date": "2019-12-23",
	"modification_date": "2020-01-15",
	"author": "Benjamin B.<br><a target='_blank' href='https://github.com/2bprog/eedomus-deconzact-plugin'>Sources sur github <img src='/img/external.png'></a>",
	"description_fr": "Création d'un périphérique deCONZ de type Capteur : <br>Température, Humidité, Pression, Luminosité,<br>Détection de mouvementn Détection d'ouverture,<br>Etat de la batterie, Etat de la communication,<br><br>deCONZ est l'application de dresden elektronik qui gère les clefs zigbee ConBee, ConBee II et RaspBee",
	"description_en": "",
	"description_es": "",
	"description_it": "",
	"description_de": "",
	"forum_link": "",
	"parameters": [
	    {
			"parameter": "DZCONFIG",
			"description": "<b>Configuration :</b>",
            "xtype": "displayfield",
			"field": "style: 'padding: 3px; visibility:hidden;', value: ''"
		},		
		{		
			"parameter": "DZIPLIST",
			"description": "IP + Port du serveur deCONZ",			
            "xtype": "displayfield",
            "field": "style: 'padding-top: 3px;', value: '<a href=\\'javascript:eval(atob(\"d2luZG93Lm9wZW4oJy9zY3JpcHRfcHJveHkvP2V4ZWM9MkJfZGVjb256bGlzdC5waHAmY21kPWRpc2NvdmVyJnAyPWh0bWwmY29udHJvbGxlcl9pZD0nICsgRXh0LmdldENtcCgnYXR0YWNoZWRfY29udHJvbGxlcl9pZCcpLmdldFZhbHVlKCksJ2RlY29ueicsJ3dpZHRoPTYwMCxoZWlnaHQ9NDAwLHRvb2xiYXI9bm8nKTs\"));\\'>Recherche de serveur</a>'"			
		},
		{		
			"parameter": "DZIP",
			"description": " ",
			"xtype": "textfield",
			"default_value2": "","default_value": "10.66.254.101:8090",
			"field": "style: 'padding: 3px;', width:130, allowBlank:false, maskRe:/[0-9.:]/, regex:/^(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])\\:([0-9]{2}[0-9]?[0-9]?)$/, regexText:'Adresse IP invalide [0-255].[0-255].[0-255]:[0-255]'"
		},
		{		
			"parameter": "DZAPIKEYCR",
			"description": "Clef API deCONZ ",			
            "xtype": "displayfield",
            "field": "style: 'padding-top: 3px;', value: 'Pour l\\'obtenir : Connectez vous à <b>Phoscon-GW</b>, puis allez dans <b>Settings/Gateway/Advanced</b>,<br> cliquez sur <b>Authenticate app</b>, ensuite <a href=\\'javascript:eval(atob(\"d2luZG93Lm9wZW4oJy9zY3JpcHRfcHJveHkvP2V4ZWM9MkJfZGVjb256bGlzdC5waHAmaXA9Jytkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyaXBoX3BhcmFtW2BEWklQYF0nKS52YWx1ZSsnJmNtZD1hcGkmcDI9aHRtbCZjb250cm9sbGVyX2lkPScrRXh0LmdldENtcCgnYXR0YWNoZWRfY29udHJvbGxlcl9pZCcpLmdldFZhbHVlKCksJ2RlY29ueicsJ3dpZHRoPTYwMCxoZWlnaHQ9MjAwLHRvb2xiYXI9bm8nKTs\"));\\'>cliquez ici</a>'"			
		},
		{
			"parameter": "DZAPIKEY",
			"description": " ",
			"xtype": "textfield",
			"default_value2": "","default_value": "FB5A4E6BBF",
			"field": "style: 'padding: 3px;', width:130, allowBlank: false , maxLength:40, minLength:10"
		},
		{		
			"parameter": "DZIDLIST",
			"description": "Identifiant du capteur ",			
            "xtype": "displayfield",
            "field": "style: 'padding-top: 3px;', value: '<a href=\\'javascript:eval(atob(\"d2luZG93Lm9wZW4oJy9zY3JpcHRfcHJveHkvP2V4ZWM9MkJfZGVjb256bGlzdC5waHAmaXA9Jytkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyaXBoX3BhcmFtW2BEWklQYF0nKS52YWx1ZSsnJmtleT0nK2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJpcGhfcGFyYW1bYERaQVBJS0VZYF0nKS52YWx1ZSsnJmNtZD1saXN0JnAxPXNlbnNvcnMmcDI9aHRtbCZjb250cm9sbGVyX2lkPScrRXh0LmdldENtcCgnYXR0YWNoZWRfY29udHJvbGxlcl9pZCcpLmdldFZhbHVlKCksJ2RlY29ueicsJ3dpZHRoPTgwMCxoZWlnaHQ9NjAwLHRvb2xiYXI9bm8nKTs\"));\\'>Liste des capteurs</a>'"			
		},
		{
			"parameter": "DZCOMID",
			"description": "ID - Communication",
			"xtype": "numberfield",
			"default_value": "",
			"field": "minValue:1, maxValue:65535 ,allowDecimals:false, width:60, allowBlank:false"
		},
		{
			"parameter": "DZTEMPID",
			"description": "ID - Température ",
			"xtype": "numberfield",
			"default_value": "0",
			"field": "minValue:0, maxValue:65535 ,allowDecimals:false, width:60, allowBlank:false"
		},
		{
			"parameter": "DZHUMID",
			"description": "ID - Humidité",
			"xtype": "numberfield",
			"default_value": "0",
			"field": "minValue:0, maxValue:65535 ,allowDecimals:false, width:60, allowBlank:false"			
		},
		{
			"parameter": "DZPRESSIONID",
			"description": "ID - Pression",
			"xtype": "numberfield",
			"default_value": "0",
			"field": "minValue:0, maxValue:65535 ,allowDecimals:false, width:60, allowBlank:false"			
		},
		{
			"parameter": "DZLUXID",
			"description": "ID - Luminosité",
			"xtype": "numberfield",
			"default_value": "0",
			"field": "minValue:0, maxValue:65535 ,allowDecimals:false, width:60, allowBlank:false"			
		},		
		{
			"parameter": "DZMVTID",
			"description": "ID - Détecteur de mouvement (1)",
			"xtype": "numberfield",
			"default_value": "0",
			"field": "minValue:0, maxValue:65535 ,allowDecimals:false, width:60, allowBlank:false"			
		},
		{
			"parameter": "DZOUVID",
			"description": "ID - Détecteur d'ouverture (1)",
			"xtype": "numberfield",
			"default_value": "0",
			"field": "minValue:0, maxValue:65535 ,allowDecimals:false, width:60, allowBlank:false"			
		},
		{
			"parameter": "DZBATID",
			"description": "ID - Batterie",		
			"xtype": "numberfield",
			"default_value": "0",
			"field": "minValue:0, maxValue:65535 ,allowDecimals:false, width:60, allowBlank:false"			
		},
		{
			"parameter": "DZFREQ",
			"description": "Fréquence d'actualisation (min)",
			"xtype": "numberfield",
			"default_value": "10",
			"field": "minValue:0, maxValue:1000 ,allowDecimals:false, width:60, allowBlank:false"
		},
		{		
			"parameter": "DZREM1",
			"description": "",			
            "xtype": "displayfield",
            "field": "style: 'padding-top: 15px;', value: 'Remarque : 1 - mise en place push'"			
		}

	],
	"scripts": [{
			"name": "2B_deconzlist.php"
		},
		{
			"name": "2B_deconz.php"
		}
	],
	"devices": [
		{	"device_id": "deczacc", 		"parent_id": "", 			"create": "1",					
			"module_id": "51",
			"type": "http",
			"name_fr": "Com. plugin.name (plugin.parameters.DZCOMID)",
			"icon": "heartbeat.png","icon2b": "def_com.png",
			"utilisation_id": "35",
			"parameters": {
				"VAR1": "plugin.parameters.DZIP,plugin.parameters.DZAPIKEY,sensors",
				"VAR2": "",
				"VAR3": "",
				"value_type": "list",
				"ignore_errors": 3,
				"RAW_URL": "http://localhost/script/?exec=2B_deconz.php&vars=[VAR1],plugin.parameters.DZCOMID&action=GET",
				"RAW_XPATH": "//reachable",
				"POLLING": "plugin.parameters.DZFREQ",
				"CONVERT": "0"
			},
			"values": [
				{ "value": "0", "description": "Injoignable",  "icon": "heartbeat_c2.png","icon2b": "def_com_ko.png" },
				{ "value": "1",	"description": "OK",		   "icon": "heartbeat_c1.png","icon2b": "def_com_ok.png" }
			]
		},
		{	"device_id": "decztemp",		"parent_id": "deczacc",		"create": "plugin.parameters.DZTEMPID!=0",
			"module_id": "51",
			"type": "http",
			"name_fr": "Température plugin.name",
			"icon": "thermometer.png","icon2b": "def_temp.png",
			"utilisation_id": "7",
			"value_unit": "°C",
			"parameters": {
				"VAR1": "plugin.parameters.DZIP,plugin.parameters.DZAPIKEY,sensors",
				"VAR2": "",
				"VAR3": "",
				"value_type": "float",
				"ignore_errors": 3,
				"RAW_URL": "http://localhost/script/?exec=2B_deconz.php&vars=[VAR1],plugin.parameters.DZTEMPID&action=GET",
				"RAW_XPATH": "//temperature div 100",
				"POLLING": "plugin.parameters.DZFREQ",
				"CONVERT": "0"
			}
		},
		{	"device_id": "deczhum",			"parent_id": "deczacc",		"create": "plugin.parameters.DZHUMID!=0",
			"module_id": "51",
			"type": "http",
			"name_fr": "Humidité plugin.name",
			"icon": "humidite.png","icon2b": "def_hum.png",
			"utilisation_id": "22",
			"value_unit": "%",
			"parameters": {
				"VAR1": "plugin.parameters.DZIP,plugin.parameters.DZAPIKEY,sensors",
				"VAR2": "",
				"VAR3": "",
				"value_type": "float",
				"ignore_errors": 3,
				"RAW_URL": "http://localhost/script/?exec=2B_deconz.php&vars=[VAR1],plugin.parameters.DZHUMID&action=GET",
				"RAW_XPATH": "//humidity div 100",
				"POLLING": "plugin.parameters.DZFREQ",
				"CONVERT": "0"
			}
		},
		{   "device_id": "deczpression",	"parent_id": "deczacc",		"create": "plugin.parameters.DZPRESSIONID!=0",
			"module_id": "51",
			"type": "http",
			"name_fr": "Pression plugin.name",
			"icon": "pression.png","icon2b": "def_pression.png",
			"utilisation_id": "32",
			"value_unit": "hPa",
			"parameters": {
				"VAR1": "plugin.parameters.DZIP,plugin.parameters.DZAPIKEY,sensors",
				"VAR2": "",
				"VAR3": "",
				"value_type": "float",
				"ignore_errors": 3,
				"RAW_URL": "http://localhost/script/?exec=2B_deconz.php&vars=[VAR1],plugin.parameters.DZPRESSIONID&action=GET",
				"RAW_XPATH": "//pressure",
				"POLLING": "plugin.parameters.DZFREQ",
				"CONVERT": "0"
			}
		},
		{	"device_id": "deczlux",			"parent_id": "deczacc",		"create": "plugin.parameters.DZLUXID!=0",
			"module_id": "51",
			"type": "http",
			"name_fr": "Luminosité plugin.name",
			"icon": "luminosite.png","icon2b": "def_lux.png",
			"utilisation_id": "24",
			"value_unit": "Lux",
			"parameters": {
				"VAR1": "plugin.parameters.DZIP,plugin.parameters.DZAPIKEY,sensors",
				"VAR2": "",
				"VAR3": "",
				"value_type": "float",
				"ignore_errors": 3,
				"RAW_URL": "http://localhost/script/?exec=2B_deconz.php&vars=[VAR1],plugin.parameters.DZLUXID&action=GET",
				"RAW_XPATH": "//lux",
				"POLLING": "plugin.parameters.DZFREQ",
				"CONVERT": "0"
			}
		},
		{	"device_id": "deczmvt",			"parent_id": "deczacc", 	"create": "plugin.parameters.DZMVTID!=0",
			"module_id": "51",
			"type": "http",
			"name_fr": "Détecteur mvt. plugin.name",
			"icon": "pir.png","icon2b": "def_dect_mvt.png",
			"utilisation_id": "37",			
			"parameters": {
				"VAR1": "plugin.parameters.DZIP,plugin.parameters.DZAPIKEY,sensors",
				"VAR2": "",
				"VAR3": "",
				"value_type": "list",
				"ignore_errors": 3,
				"RAW_URL": "http://localhost/script/?exec=2B_deconz.php&vars=[VAR1],plugin.parameters.DZMVTID&action=GET",
				"RAW_XPATH": "//presence * 100",
				"POLLING": "plugin.parameters.DZFREQ",
				"CONVERT": "0"
			},
			"values": [{ "value": "0", 		"description": "Aucun mouvement", 	"icon": "presenceoff64.png","icon2b":"Detect01_RAS.png" },
					   { "value": "100",	"description": "Mouvement",   	 	"icon": "detection.png","icon2b":"Detect01_Mvt.png"	} ]
		},
		{	"device_id": "deczouv", 		"parent_id": "deczacc",		"create": "plugin.parameters.DZOUVID!=0",
			"module_id": "51",
			"type": "http",
			"name_fr": "Détecteur ouv plugin.name",
			"icon": "windows_open.png","icon2b": "def_dect_ouv.png",
			"utilisation_id": "10",			
			"parameters": {
				"VAR1": "plugin.parameters.DZIP,plugin.parameters.DZAPIKEY,sensors",
				"VAR2": "",
				"VAR3": "",
				"value_type": "list",
				"ignore_errors": 3,
				"RAW_URL": "http://localhost/script/?exec=2B_deconz.php&vars=[VAR1],plugin.parameters.DZOUVID&action=GET",
				"RAW_XPATH": "//open * 100 ",
				"POLLING": "plugin.parameters.DZFREQ",
				"CONVERT": "0"
			},
			"values": [	{ "value": "0", 	"description": "Fermé", 	"icon": "windows_closed.png","icon2b":"fenetre01_ferme.png" },
						{ "value": "100",	"description": "Ouvert",	"icon": "windows_open.png","icon2b":"fenetre01_ouvert.png"	} ]
		},		
		{	"device_id": "deczbat",			"parent_id": "deczacc",		"create": "plugin.parameters.DZBATID!=0",
			"module_id": "51",
			"type": "http",
			"name_fr": "Batterie plugin.name",
			"icon": "battery.png","icon2b": "def_bat.png",
			"utilisation_id": "35",
			"value_unit": "%",
			"parameters": {
				"VAR1": "plugin.parameters.DZIP,plugin.parameters.DZAPIKEY,sensors",
				"VAR2": "",
				"VAR3": "",
				"value_type": "float",
				"ignore_errors": 3,
				"RAW_URL": "http://localhost/script/?exec=2B_deconz.php&vars=[VAR1],plugin.parameters.DZBATID&action=GET",
				"RAW_XPATH": "//battery",
				"POLLING": "plugin.parameters.DZFREQ",
				"CONVERT": "0"
			}		
		}
	]
}